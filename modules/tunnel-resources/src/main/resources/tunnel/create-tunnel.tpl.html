<!-- * Copyright (c) 2014 Cisco Systems, Inc. and others. All rights reserved.* * This program and the accompanying materials are made available underthe * terms of the Eclipse Public License v1.0 which accompanies this distribution,* and is available at http://www.eclipse.org/legal/epl-v10.html --><div class="row-fluid" style="height:51px; background-color:#05171e;">    <ul class="nav nav-pills ng-scope" style="padding-top: 12px;">        <li class="active"><a href="" data-toggle="pill" ng-click="toggle('eline')">Tunnels</a></li>    </ul></div><div style="width:100%;height:516px;overflow:auto;overflow-x:hidden;">    <!--div class="container-fluid whitebr"-->    <div class="row" style="height:35px;font-family:'微软雅黑';font-size:16px;font-weight:bold;border:1px solid #bfbfbf;">        <span class="col-md-1">            <span class="blue pull-right"></span>        </span>        <label class="col-md-3" style="margin-top:5px;">{{ '隧道创建' | translate }}</label>    </div>    <form class="form-group" ng-model="tunnel" name="tunnelform" style="margin-left:50px;margin-right:50px;">        <div class="row" style="margin-top:10px;">            <label class="col-md-2 ng-binding textLabel">ID</label>            <input class="col-md-2 form-control inputText" type="number" ng-model="tunnel.id" name="tunnelId" tooltip="{{ 'number' | translate }}" ng-blur="idchange=true" ng-focus="idchange=false" ng-pattern="/^[0-9]*[1-9][0-9]*$/" required/>            <label class="errorlabel col-md-1">                <span class="error" ng-show="true">*</span>            </label>            <label class="col-md-2 ng-binding textLabel">{{ 'Name' | translate }}</label>            <input class="col-md-2 form-control inputText" type="text" ng-model="tunnel.name" name="name" tooltip="{{ 'string' | translate }}" ng-blur="namechange=true" ng-focus="namechange=false" required/>            <label class="errorlabel col-md-1">                <span class="error" ng-show="true">*</span>            </label>        </div>        <div class="row">            <span class="col-md-1"></span>            <span class="col-md-4 error" style="margin-left:4.5em" ng-show="tunnelform.tunnelId.$invalid && idchange">{{ 'ID:must be number and bigger than 0' | translate }}</span>            <span class="col-md-1"></span>            <span class="col-md-4 error" style="margin-left:1em" ng-show="tunnelform.name.$invalid && namechange">{{ 'Name:not null and must be string' | translate }}</span>        </div>        <div class="row">            <label class="col-md-2 ng-binding textLabel">{{ 'User Label' | translate }}</label>            <input class="col-md-2 form-control inputText" type="text" ng-model="tunnel['user-label']" name="userLabel" />            <label class="errorlabel col-md-1">                <!-- span class="error" ng-show="tunnelform.userLabel.$invalid">×</span>                    <span style="color:green" ng-show="tunnelform.userLabel.$valid">√</span  -->            </label>            <label class="col-md-2 ng-binding textLabel">{{ 'Source IP' | translate }}</label>            <input class="col-md-2 form-control inputText" type="text" ng-model="tunnel['source-ip']" name="sip" tooltip="ip" ng-blur="sipchange=true" ng-focus="sipchange=false" ng-pattern="/^((25[0-5]|2[0-4]\d|[01]?\d\d?)($|(?!\.$)\.)){4}$/" />            <label class="errorlabel col-md-1">                <!-- span class="error" ng-show="tunnelform['source-ip'].$invalid">×</span>                    <span style="color:green" ng-show="tunnelform['source-ip'].$valid">√</span -->            </label>        </div>        <div class="row">            <span class="col-md-6"></span>            <span class="error col-md-4" ng-show="tunnelform.sip.$invalid && sipchange" style="margin-left:5.7em">{{ 'Source IP:must follow IP format' | translate }}</span>        </div>        <div class="row">            <label class="col-md-2 textLabel">{{ 'Destination IP' | translate }}</label>            <input class="col-md-2 form-control inputText" type="text" ng-model="tunnel['destination-ip']" name="dip" tooltip="ip" ng-blur="dipchange=true" ng-focus="dipchange=false" ng-pattern="/^((25[0-5]|2[0-4]\d|[01]?\d\d?)($|(?!\.$)\.)){4}$/" />            <label class="errorlabel col-md-1">                <!-- span class="error" ng-show="tunnelform['destination-ip'].$invalid">×</span>                <span style="color:green" ng-show="tunnelform['destination-ip'].$valid">√</span  -->            </label>            <label class="col-md-2 textLabel">{{ 'Source Ne' | translate }}</label>            <select class="col-md-2 form-control selectDiv " ng-model="tunnel['source-ne-id']">                <option></option>                <option ng-repeat="node in nodes | orderBy:'userlabel'" value="{{node.id}}">{{node['userlabel']}}</option>            </select>        </div>        <div class="row">            <span class="col-md-1"></span>            <span class="error col-md-4" ng-show="tunnelform.dip.$invalid && dipchange" style="margin-left:4.5em">{{ 'Destination IP:must follow IP format' | translate }}</span>        </div>        <div class="row">            <label class="col-md-2 textLabel">{{ 'Destination Ne' | translate }}</label>            <select class="col-md-2 form-control selectDiv " ng-model="tunnel['destination-ne-id']">                <option></option>                <option ng-repeat="node in nodes | orderBy:'userlabel'" value="{{node.id}}">{{node['userlabel']}}</option>            </select>        </div>        <!--Protection start -->        <div class="row">            <span class="col-md-1">                <span class="yellow pull-right"></span>            </span>            <span class="col-md-9 htext" style="border-bottom:solid 1px #000;">{{ 'Protection' | translate }}</span>            <span class="col-md-2">                <button class="tunnelButton plusIcon  pull-right" ng-click="addProtection()"></button>                <button class="tunnelButton closeIcon pull-right" tooltip="{{ 'delete protection' | translate }}" ng-click="removeProtection()"></button>            </span>        </div>        <div ng-show="protctionShow">            <div class="row">                <!-- <label class="col-md-2 ng-binding textLabel">Snc ID</label>                 <input class="col-md-2 form-control inputText" type="text" ng-model="tunnel.protection['snc-id']" tooltip="{{ 'string' | translate }}" />                 <label class="errorlabel col-md-1"></label> -->                <label class="col-md-2 ng-binding textLabel">{{ 'Protection Type' | translate }}</label>                <select class="col-md-2 form-control selectDiv" ng-model="curProType" ng-change="selProtectType(curProType)">                    <!--option ng-repeat="proType in proTypes">{{proType.id}}</option-->                    <option value="path-protection-1-to-1">{{ 'path-protection-1-to-1' | translate }}</option>                    <option value="path-protection-1-plus-1">{{ 'path-protection-1-plus-1' | translate }}</option>                    <option value="unprotected">{{ 'permanent-1-to-1-protection' | translate }}</option>                    <option value="unprotected">{{ 'permanent-1-plus-1-protection' | translate }}</option>                </select>                <label class="errorlabel col-md-1"></label>                <label class="col-md-2 ng-binding textLabel">{{ 'Name' | translate }}</label>                <input class="col-md-2 form-control inputText" type="text" ng-model="tunnel.protection.name" tooltip="{{ 'string' | translate }}" />                <label class="errorlabel col-md-1"></label>            </div>            <div class="row">                <label class="col-md-2 ng-binding textLabel">{{ 'Revertive Mode' | translate }}</label>                <select class="col-md-2 form-control selectDiv" ng-model="tunnel.protection['revertive-mode']">                    <option value="no-revertive">{{ 'no-revertive' | translate }}</option>                    <option value="revertive">{{ 'revertive' | translate }}</option>                </select>                <label class="errorlabel col-md-1"></label>                <label class="col-md-2 ng-binding textLabel">WTR</label>                <input class="col-md-2 form-control inputText" type="text" ng-model="tunnel.protection['wtr']" tooltip="{{ 'string' | translate }}" placeholder="s" />            </div>            <div class="row">                <label class="col-md-2 ng-binding textLabel">{{ 'Hold Off Time' | translate }}</label>                <input class="col-md-2 form-control inputText ng-pristine ng-untouched ng-valid" type="number" ng-model="tunnel.protection['hold-off-time']" placeholder="ms">                <label class="errorlabel col-md-1">                    <span class="error" ng-show="tunnel.protection['hold-off-time']%50 != 0"></span>                </label>                <div ng-show="lspCreShow">                    <label class="col-md-2 ng-binding textLabel">{{ 'Lsp Create Mode' | translate }}</label>                    <select class="col-md-2 form-control selectDiv " ng-model="curLspType" ng-change="lspCreateType(curLspType)">                        <option ng-repeat="createType in lspCreateTypes">{{createType.id}}</option>                    </select>                    <label class="errorlabel col-md-1"></label>                </div>            </div>            <!--<label class="col-md-2 ng-binding textLabel">Reroute Revertive Mode </label>                 <select class="col-md-2 form-control selectDiv" ng-model="tunnel.protection['reroute-revertive-mode']">                     <option value="norvt">norvt</option>                     <option value="rvt">rvt</option>                 </select>-->                    <!--<div class="row">                 <label class="col-md-2 ng-binding textLabel">Reroute Wtr</label>                 <input class="col-md-2 form-control inputText" type="text" ng-model="tunnel.protection['reroute-wtr']" tooltip="{{ 'string' | translate }}" />             </div>-->        </div>        <!--Protection end -->        <!-- lsp start -->        <div ng-repeat="lsp in tunnel.lsp">            <div class="row">                <span class="col-md-1">                    <span class="yellow pull-right"></span>                </span>                <span class="col-md-9 htext" style="border-bottom:solid 1px #000;">LSP</span>                <span class="col-md-2">                     <button id="btn-lsp{{$index}}" type="button" class="tunnelButton expandIconArrowDown pull-right" ng-click="toggle('lsp'+$index)"></button>                     <button class="tunnelButton closeIcon pull-right" tooltip="{{ 'delete lsp' | translate }}" ng-click="removeLsp($index)"></button>                </span>            </div>            <div id="lsp{{$index}}" class="collapse">                <div class="row">                    <label class="col-md-2 ng-binding textLabel">ID</label>                    <input class="col-md-2 form-control inputText" type="number" ng-model="lsp.id" name="lspid{{$index}}" tooltip="{{ 'number' | translate }}" ng-blur="lspidchange[$index]=true" ng-focus="lspidchange[$index]=false" ng-pattern="/^[0-9]*[1-9][0-9]*$/" required/>                    <label class="errorlabel col-md-1">                        <span class="error" ng-show="true">*</span>                        <!-- span class="error" ng-show="tunnelform['lsp'+$index].$invalid">×</span>                            <span class="error" ng-show="tunnelform['lsp'+$index].$valid">√</span -->                    </label>                    <label class="col-md-2 ng-binding textLabel">{{ 'Name' | translate }}</label>                    <input class="col-md-2 form-control inputText" type="text" ng-model="lsp.name" name="lspname{{$index}}" tooltip="{{ 'string' | translate }}" ng-blur="lspnamechange[$index]=true" ng-focus="lspnamechange[$index]=false" required/>                    <label class="errorlabel col-md-1">                        <span class="error" ng-show="true">*</span>                    </label>                </div>                <div class="row">                    <span class="col-md-1"></span>                    <span class="col-md-4 error" ng-show="tunnelform['lspid'+$index].$invalid && lspidchange[$index]" style="margin-left:4.5em">{{ 'LSP ID:must be number and bigger than 0' | translate }}</span>                    <span class="col-md-1"></span>                    <span class="col-md-4 error" ng-show="tunnelform['lspname'+$index].$invalid && lspnamechange[$index]" style="margin-left:1em">{{ 'LSP Name:not null and string' | translate }}</span>                </div>                <div class="row">                    <label class="col-md-2 ng-binding textLabel">{{ 'User Label' | translate }}</label>                    <input class="col-md-2 form-control inputText" type="text" ng-model="lsp['user-label']" tooltip="{{ 'string' | translate }}" />                    <label class="errorlabel col-md-1"></label>                    <label class="col-md-2 ng-binging textLabel">{{ 'LSP Role' | translate }}</label>                    <select class="col-md-2 form-control selectDiv" ng-model="lsp['lsp-role']">                        <option value="slave">{{ 'slave' | translate }}</option>                        <option value="master" selected="selected">{{ 'master' | translate }}</option>                    </select>                </div>                <div class="row">                    <label class="col-md-2 ng-binging textLabel">{{ 'Ingress Ne' | translate }}</label>                    <select class="col-md-2 form-control selectDiv " ng-model="lsp['ingress-ne-id']" ng-change="changeXc($index,0)">                        <option value=""></option>                        <option ng-repeat="node in nodes | orderBy:'userlabel'" value="{{node.id}}">{{node['userlabel']}}</option>                    </select>                    <label class="errorlabel col-md-1"></label>                    <label class="col-md-2 ng-binging textLabel">{{ 'Egress Ne' | translate }}</label>                    <select class="col-md-2 form-control selectDiv" ng-model="lsp['egress-ne-id']" ng-change="changeXc($index,1)">                        <option value=""></option>                        <option ng-repeat="node in nodes | orderBy:'userlabel'" value="{{node.id}}">{{node['userlabel']}}</option>                    </select>                </div>                <div class="row">                    <label class="col-md-2 ng-binging textLabel">{{ 'LSP Type' | translate }}</label>                    <select class="col-md-2 form-control selectDiv" ng-model="lsp['lsp-type']" ng-change="changeLspType($index)">                        <option value="pep">PE-P</option>                        <option value="pp">P-P</option>                        <option value="ppe">P-PE</option>                        <option value="pepe" selected="selected">PE-PE</option>                    </select>                </div>                <div class="row">                    <span class="col-md-1">                        <span class="cyan pull-right"></span>                    </span>                    <span class="col-md-9 htext" style="border-bottom:solid 1px #000;">OAM</span>                    <span class="col-md-2">                         <button  type="button" class="tunnelButton plusIcon pull-right" ng-click="addOam($index)"></button>                         <button class="tunnelButton closeIcon pull-right" tooltip="{{ 'delete oam' | translate }}" ng-click="removeOam($index)"></button>                    </span>                </div>                <div ng-show="oamshow[$index]">                    <div class="row">                        <label class="col-md-2 ng-binding textLabel">CC Exp</label>                        <select class="col-md-2 form-control selectDiv" ng-model="lsp.oam['cc-exp']">                            <option value="AF1">AF1</option>                            <option value="AF2">AF2</option>                            <option value="AF3">AF3</option>                            <option value="AF4">AF4</option>                            <option value="BE">BE</option>                            <option value="EF">EF</option>                            <option value="CS6">CS6</option>                            <option value="CS7" selected="selected">CS7</option>                        </select>                        <label class="errorlabel col-md-1"></label>                        <label class="col-md-2 ng-binding textLabel">{{ 'CC Interval' | translate }}</label>                        <select class="col-md-2 form-control selectDiv" ng-model="lsp.oam['cc-interval']">                            <option value="3.33">3.33ms</option>                            <option value="10">10ms</option>                            <option value="100">100ms</option>                            <option value="1000">1000ms</option>                            <!-- option value="10000">10000ms</option>                             <option value="60000">60000ms</option>                             <option value="600000">600000ms</option -->                        </select>                    </div>                    <!--   <div ng-repeat="mep in lsp.oam.meps">                       <h5 class="htext" style="margin-left:20px;">Mep                          <span ng-show="$index===0" class="htext">&nbsp;&nbsp;Local</span>                          <span ng-show="$index===1" class="htext">&nbsp;&nbsp;Remote</span>                       </h5>                       <div class="row">                         <label class="col-md-2 ng-binding textLabel">ID</label>                         <input class="col-md-2 form-control inputText" type="number" ng-model="mep.id" tooltip="{{ 'number' | translate }}" ng-pattern="/^([1-9]|[1-2][0-9]|3[0-2])$/" />                         <label class="errorlabel col-md-1">                            <span class="error" ng-show="mep.id>32||mep.id<1" >1~32</span>                         </label>                         <label class="col-md-2 ng-binding textLabel">Name</label>                         <input class="col-md-2 form-control inputText" type="text" ng-model="mep.name" tooltip="{{ 'string' | translate }}" />                       </div>                     </div>-->                </div>                <div ng-show="xcListShow">                    <div ng-repeat="xc in lsp.route[0].xc">                        <div class="row">                            <span class="col-md-1">                                <span class="cyan pull-right"></span>                            </span>                            <span class="col-md-9 htext" style="border-bottom:solid 1px #000;">XC</span>                            <span class="col-md-2">                                 <button id="btn-xc{{$parent.$index+''+$index}}" type="button" class="tunnelButton expandIconArrowDown pull-right" ng-click="toggle('xc'+$parent.$index+$index)"></button>                                 <button class="tunnelButton closeIcon pull-right" tooltip="{{ 'delete xc' | translate }}" ng-click="removeXc($parent.$index,$index)"></button>                            </span>                        </div>                        <div id="xc{{$parent.$index+''+$index}}" class="collapse">                            <div class="row">                                <label class="col-md-2 textLabel">{{ 'Ne UserLabel' | translate }}:</label>                                <select class="col-md-2 form-control selectDiv " ng-model="xc['ne-id']" ng-change="changeLtp($parent.$index,$index)">                                    <option></option>                                    <option ng-repeat="node in nodes | filter:{id:'!netconf'}" value="{{node.id}}">{{node['userlabel']}}</option>                                </select>                                <label class="errorlabel col-md-1"></label>                                <label class="col-md-2 textLabel">{{ 'Ingress Port' | translate }}:</label>                                <select class="col-md-2 form-control selectDiv" ng-model="xc['ingress-ltp-id']">                                    <option ng-repeat="port in ports[$parent.$index][$index] | orderBy:'userlabel' | filter:{id:'!local'}" value="{{port.id.split(':')[2]}}">{{port['userlabel']}}</option>                                </select>                            </div>                            <div class="row">                                <label class="col-md-2 textLabel">{{ 'Egress Port' | translate }}:</label>                                <select class="col-md-2 form-control selectDiv" ng-model="xc['egress-ltp-id']">                                    <option></option>                                    <option ng-repeat="port in ports[$parent.$index][$index] | orderBy:'userlabel' | filter:{id:'!local'}" value="{{port.id.split(':')[2]}}">{{port['userlabel']}}</option>                                </select>                                <label class="errorlabel col-md-1"></label>                                <label class="col-md-2 textLabel">{{ 'Backward Peer ID' | translate }}:</label>                                <input class="col-md-2 form-control inputText" type="text" ng-model="xc['backward-peer-id']" />                            </div>                            <div class="row">                                <label class="col-md-2 textLabel">{{ 'Forward Peer ID' | translate }}:</label>                                <input class="col-md-2 form-control inputText" type="text" ng-model="xc['forward-peer-id']" />                            </div>                        </div>                    </div>                </div>                <button class="btn btn-default col-md-offset-11 addxc" ng-click="addXc($index)"></button>                </br>            </div>        </div>        <!-- lsp end-->        <button class="btn btn-default col-md-offset-11 addlsp" ng-click="addLsp()"></button>        </br>        <button class="btn btn-default col-md-offset-11" ng-disabled="tunnelform.$invalid" ng-click="createTunnel(tunnel)">{{ 'createTunnel' | translate }}</button>    </form></div></div>